
<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <title>Varaa kierros</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: Arial, sans-serif; background: #f7f7f7; margin: 0; padding: 0; }
        .container { max-width: 400px; margin: 30px auto; background: #fff; padding: 24px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        h1 { text-align: center; color: #2a5d8f; }
        p { text-align: center; color: #444; }
        .tur-list { margin-top: 24px; }
        .tur { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; padding: 12px; background: #eaf3fa; border-radius: 8px; }
        .tur.bokad { background: #d1e7dd; }
        .tur-namn { font-weight: bold; }
        .boknings-knapp, .bekrafta-knapp, .poista-knapp { padding: 6px 12px; border: none; border-radius: 6px; background: #2a5d8f; color: #fff; cursor: pointer; font-size: 1em; margin-left: 6px; }
        .boknings-knapp:disabled { background: #aaa; cursor: not-allowed; }
        .namn-input, .salasana-input { padding: 6px; border-radius: 6px; border: 1px solid #bbb; font-size: 1em; }
        .poista-knapp { background: #c0392b; }
        .kello { text-align:center; margin-top:30px; font-size:1.5em; color:#ff0000; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Varaa kierros</h1>
        <p>Valitse vapaa aika ja kirjoita nimesi varataksesi. Kun aika on varattu, nimi näkyy ja kukaan muu ei voi varata sitä. Varaus voidaan poistaa vain salasanalla.</p>
        <div class="tur-list" id="turList"></div>
        <div class="kello">Kello on: <span id="kello">--:--:--</span></div>
    </div>
    <script>
        const ajat = ["13:00", "13:30", "14:00", "14:30", "15:00", "15:30", "16:00"];
        let kierrokset = Array(ajat.length).fill(null);
        const salasana = 'kanada';

        function paivitaKello() {
            const nyt = new Date();
            const hh = String(nyt.getHours()).padStart(2, '0');
            const mm = String(nyt.getMinutes()).padStart(2, '0');
            const ss = String(nyt.getSeconds()).padStart(2, '0');
            document.getElementById('kello').textContent = `${hh}:${mm}:${ss}`;
        }
        setInterval(paivitaKello, 1000);
        paivitaKello();

        function renderKierrokset() {
            const turList = document.getElementById('turList');
            turList.innerHTML = '';
            kierrokset.forEach((nimi, i) => {
                const turDiv = document.createElement('div');
                turDiv.className = 'tur' + (nimi ? ' bokad' : '');
                const turNimi = document.createElement('span');
                turNimi.className = 'tur-namn';
                turNimi.textContent = ajat[i];
                turDiv.appendChild(turNimi);
                if (nimi) {
                    const nimiSpan = document.createElement('span');
                    nimiSpan.textContent = nimi;
                    turDiv.appendChild(nimiSpan);
                    const poistaBtn = document.createElement('button');
                    poistaBtn.className = 'poista-knapp';
                    poistaBtn.textContent = 'Poista varaus';
                    poistaBtn.onclick = () => naytaSalasanaInput(i);
                    turDiv.appendChild(poistaBtn);
                } else {
                    const varaaBtn = document.createElement('button');
                    varaaBtn.className = 'boknings-knapp';
                    varaaBtn.textContent = 'Varaa';
                    varaaBtn.onclick = () => naytaNimiInput(i);
                    turDiv.appendChild(varaaBtn);
                }
                turList.appendChild(turDiv);
            });
        }

        function naytaNimiInput(index) {
            const turList = document.getElementById('turList');
            const turDivs = turList.children;
            const turDiv = turDivs[index];
            turDiv.innerHTML = '';
            const turNimi = document.createElement('span');
            turNimi.className = 'tur-namn';
            turNimi.textContent = ajat[index];
            turDiv.appendChild(turNimi);
            const input = document.createElement('input');
            input.type = 'text';
            input.placeholder = 'Kirjoita nimesi';
            input.className = 'namn-input';
            input.maxLength = 30;
            turDiv.appendChild(input);
            const vahvistaBtn = document.createElement('button');
            vahvistaBtn.className = 'bekrafta-knapp';
            vahvistaBtn.textContent = 'Vahvista';
            vahvistaBtn.onclick = () => {
                const nimi = input.value.trim();
                if (nimi.length > 0) {
                    kierrokset[index] = nimi;
                    renderKierrokset();
                } else {
                    alert('Sinun täytyy kirjoittaa nimi!');
                }
            };
            turDiv.appendChild(vahvistaBtn);
        }

        function naytaSalasanaInput(index) {
            const turList = document.getElementById('turList');
            const turDivs = turList.children;
            const turDiv = turDivs[index];
            turDiv.innerHTML = '';
            const turNimi = document.createElement('span');
            turNimi.className = 'tur-namn';
            turNimi.textContent = ajat[index];
            turDiv.appendChild(turNimi);
            const nimiSpan = document.createElement('span');
            nimiSpan.textContent = kierrokset[index];
            turDiv.appendChild(nimiSpan);
            const input = document.createElement('input');
            input.type = 'password';
            input.placeholder = 'Salasana';
            input.className = 'salasana-input';
            input.maxLength = 20;
            turDiv.appendChild(input);
            const poistaBtn = document.createElement('button');
            poistaBtn.className = 'poista-knapp';
            poistaBtn.textContent = 'Poista varaus';
            poistaBtn.onclick = () => {
                const syote = input.value;
                if (syote === salasana) {
                    kierrokset[index] = null;
                    renderKierrokset();
                } else {
                    alert('Väärä salasana!');
                }
            };
            turDiv.appendChild(poistaBtn);
            const peruutaBtn = document.createElement('button');
            peruutaBtn.className = 'bekrafta-knapp';
            peruutaBtn.textContent = 'Peruuta';
            peruutaBtn.onclick = () => renderKierrokset();
            turDiv.appendChild(peruutaBtn);
        }

        renderKierrokset();
    </script>
</body>
</html>
